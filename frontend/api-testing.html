<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Testing Dashboard - Axes Systems</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/api-testing.css">
</head>
<body>
    <header>
        <h1>üß™ API Testing Dashboard</h1>
        <a href="index.html" class="nav-back">‚Üê Back to Dashboard</a>
    </header>

    <div class="container">
        <div class="server-status">
            <div class="status-item">
                <div class="status-dot offline" id="status-java"></div>
                <div>
                    <strong>Java Backend</strong>
                    <div class="endpoint-path">http://localhost:8085</div>
                </div>
            </div>
            <div class="status-item">
                <div class="status-dot offline" id="status-python"></div>
                <div>
                    <strong>Python Backend</strong>
                    <div class="endpoint-path">http://localhost:8002</div>
                </div>
            </div>
            <button onclick="checkAllServers()" style="width: auto; padding: 8px 20px;">
                üîÑ Check Status
            </button>
        </div>

        <div class="endpoint-grid">
            <!-- Health Check -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="method-badge method-get">GET</span>
                        <span style="margin-left: 8px; font-weight: 600;">Health Check</span>
                    </div>
                </div>
                <div class="endpoint-path">/api/health</div>
                <div class="param-group" style="margin-top: 16px;">
                    <label>Server:</label>
                    <select id="health-server">
                        <option value="http://localhost:8085">Java (8085)</option>
                        <option value="http://localhost:8002">Python (8002)</option>
                    </select>
                </div>
                <button class="btn-test" onclick="testHealth()">üöÄ Test</button>
                <div id="response-health" class="response-panel" style="display:none;"></div>
            </div>

            <!-- WKT Processing -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="method-badge method-post">POST</span>
                        <span style="margin-left: 8px; font-weight: 600;">Process WKT</span>
                    </div>
                </div>
                <div class="endpoint-path">/api/wkt/process</div>
                <div class="param-group" style="margin-top: 16px;">
                    <label>WKT Content:</label>
                    <textarea id="wkt-content" placeholder="LINESTRING(6.9 50.9, 6.91 50.91)"></textarea>
                </div>
                <button class="btn-test" onclick="testWktProcess()">üöÄ Test</button>
                <div id="response-wkt" class="response-panel" style="display:none;"></div>
            </div>

            <!-- Feature Details -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="method-badge method-get">GET</span>
                        <span style="margin-left: 8px; font-weight: 600;">Feature Details</span>
                    </div>
                </div>
                <div class="endpoint-path">/api/features/{id}</div>
                <div class="param-group" style="margin-top: 16px;">
                    <label>Feature ID:</label>
                    <input type="text" id="feature-id" placeholder="street_001">
                </div>
                <button class="btn-test" onclick="testFeatureDetails()">üöÄ Test</button>
                <div id="response-feature" class="response-panel" style="display:none;"></div>
            </div>

            <!-- Displacement -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="method-badge method-post">POST</span>
                        <span style="margin-left: 8px; font-weight: 600;">Displacement</span>
                    </div>
                </div>
                <div class="endpoint-path">/api/displacement</div>
                <div class="param-group" style="margin-top: 16px;">
                    <label>Features JSON:</label>
                    <textarea id="displacement-json" placeholder='{"features":[...]}'></textarea>
                </div>
                <button class="btn-test" onclick="testDisplacement()">üöÄ Test</button>
                <div id="response-displacement" class="response-panel" style="display:none;"></div>
            </div>

            <!-- OSM Fetch -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="method-badge method-post">POST</span>
                        <span style="margin-left: 8px; font-weight: 600;">Fetch OSM Data</span>
                    </div>
                </div>
                <div class="endpoint-path">/api/osm/fetch</div>
                <div class="param-group" style="margin-top: 16px;">
                    <label>Bounding Box:</label>
                    <input type="text" id="bbox-minlat" placeholder="minLat (50.9)" style="margin-bottom: 4px;">
                    <input type="text" id="bbox-minlng" placeholder="minLng (6.9)" style="margin-bottom: 4px;">
                    <input type="text" id="bbox-maxlat" placeholder="maxLat (50.91)" style="margin-bottom: 4px;">
                    <input type="text" id="bbox-maxlng" placeholder="maxLng (6.91)">
                </div>
                <button class="btn-test" onclick="testOsmFetch()">üöÄ Test</button>
                <div id="response-osm" class="response-panel" style="display:none;"></div>
            </div>

            <!-- Route Calculation -->
            <div class="endpoint-card">
                <div class="endpoint-header">
                    <div>
                        <span class="method-badge method-post">POST</span>
                        <span style="margin-left: 8px; font-weight: 600;">Calculate Route</span>
                    </div>
                </div>
                <div class="endpoint-path">/api/route/calculate</div>
                <div class="param-group" style="margin-top: 16px;">
                    <label>Point A (lat, lng):</label>
                    <input type="text" id="route-a-lat" placeholder="50.9" style="margin-bottom: 4px;">
                    <input type="text" id="route-a-lng" placeholder="6.9" style="margin-bottom: 12px;">
                    <label>Point B (lat, lng):</label>
                    <input type="text" id="route-b-lat" placeholder="50.91" style="margin-bottom: 4px;">
                    <input type="text" id="route-b-lng" placeholder="6.91">
                </div>
                <button class="btn-test" onclick="testRoute()">üöÄ Test</button>
                <div id="response-route" class="response-panel" style="display:none;"></div>
            </div>
        </div>

        <div class="logs-section">
            <div class="logs-header">
                <h3>üìã Request Logs</h3>
                <button class="btn-clear" onclick="clearLogs()">Clear Logs</button>
            </div>
            <div class="logs-container" id="logs-container">
                <div class="log-entry log-info">
                    <span class="log-timestamp">[READY]</span>
                    Dashboard initialized. Ready to test APIs.
                </div>
            </div>
        </div>
    </div>

    <script src="js/api-testing.js"></script>
</body>
</html>
